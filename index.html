<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="description" content="A coin counter" />
	<meta name="author" content="Paul Chong" />
	<title>Coin Counter</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" />
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<link rel="stylesheet" href="./css/main.css" />	
</head>
<body>
	<section class="counter-container centered">
		<h2>Coin Counter</h1>
		<form id="calculateForm">
			<div class="row centered">
				<div class="one-half column">
					<div id="notification1" class="notification"></div>
					<input name="coin1" pattern="[0-9]{1,3}" type="text" class="circle" autocomplete="off" required></input>	
				</div>

				<div class="one-half column">
					<div id="notification2" class="notification"></div>
					<input name="coin2" pattern="[0-9]{1,3}" type="text" class="circle" autocomplete="off" required></input>	
				</div>
			</div>
			<div class="row centered">
				<div class="one-half column">
					<div id="notification3" class="notification"></div>
					<input name="coin3" pattern="[0-9]{1,3}" type="text" class="circle" autocomplete="off" required></input>	
				</div>

				<div class="one-half column">
					<div id="notification4" class="notification"></div>
					<input name="coin4" pattern="[0-9]{1,3}" type="text" class="circle" autocomplete="off" required></input>	
				</div>
			</div>
			<input name="total" class="u-full-width" type="text" autocomplete="off" required/>
			<input class="black u-full-width" type="submit" value="Calculate" />
		</form>
	</section>
</body>
<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous"></script>
<script>
	function calculateCoins(coin1, coin2, coin3, coin4, total) {
		const coins = [coin1, coin2, coin3, coin4];
		coins.sort(function(a, b){ return b-a });
		
		for (let i = 0; i < coins.length && total > 0; i++) {
			let quantity = Math.floor(total / coins[i]);
			if (quantity > 0) {
				total -= quantity * coins[i];
				coins[i] = { coin: coins[i], quantity: quantity }
			}
		}
		return coins;
	}

	$(document).ready(function() {
		$("#calculateForm").submit(function(event) {
			event.preventDefault();
			const coinTarget = event.target;
			let result = calculateCoins(coinTarget.coin1.value, coinTarget.coin2.value, coinTarget.coin3.value, coinTarget.coin4.value, coinTarget.total.value);
			
			for (let i = 0; i < result.length; i++) {
				switch (result[i].coin) {
					case coinTarget.coin1.value:
						$("#notification1").html(result[i].quantity);
						$("#notification1").css("visibility", "visible");
						break;
					case coinTarget.coin2.value:
						$("#notification2").html(result[i].quantity);
						$("#notification2").css("visibility", "visible");
						break;
					case coinTarget.coin3.value:
						$("#notification3").html(result[i].quantity);
						$("#notification3").css("visibility", "visible");
						break;
					case coinTarget.coin4.value:
						$("#notification4").html(result[i].quantity);
						$("#notification4").css("visibility", "visible");
						break;
				}
			}
		});
	});
</script>
</html>